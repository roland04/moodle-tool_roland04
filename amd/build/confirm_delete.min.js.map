{"version":3,"sources":["../src/confirm_delete.js"],"names":["define","$","str","notification","ajax","templates","processDelete","id","courseId","todoList","promises","call","methodname","args","done","courseid","data","console","log","render","html","fail","exception","init","document","on","e","preventDefault","todoId","currentTarget","attr","get_strings","key","component","then","s","confirm","catch"],"mappings":"AAuBAA,OAAM,gCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,mBAAvB,CAA4C,WAA5C,CAAyD,gBAAzD,CAAD,CAA6E,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAA+BC,CAA/B,CAAqCC,CAArC,CAAgD,CAC/H,GAAIC,CAAAA,CAAa,CAAG,SAASC,CAAT,CAAaC,CAAb,CAAuBC,CAAvB,CAAiC,CACjD,GAAIC,CAAAA,CAAQ,CAAGN,CAAI,CAACO,IAAL,CAAU,CAAC,CACtBC,UAAU,CAAE,2BADU,CAEtBC,IAAI,CAAE,CAACN,EAAE,CAAEA,CAAL,CAFgB,CAAD,CAAV,CAAf,CAIAG,CAAQ,CAAC,CAAD,CAAR,CAAYI,IAAZ,CAAiB,UAAW,CACxB,GAAIJ,CAAAA,CAAQ,CAAGN,CAAI,CAACO,IAAL,CAAU,CAAC,CACtBC,UAAU,CAAE,6BADU,CAEtBC,IAAI,CAAE,CAACE,QAAQ,CAAEP,CAAX,CAFgB,CAAD,CAAV,CAAf,CAIAE,CAAQ,CAAC,CAAD,CAAR,CAAYI,IAAZ,CAAiB,SAASE,CAAT,CAAe,CAE5BC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBT,CAAxB,EACAJ,CAAS,CAACc,MAAV,CAAiB,yBAAjB,CAA4CH,CAA5C,EACKF,IADL,CACU,SAASM,CAAT,CAAe,CACjBX,CAAQ,CAACW,IAAT,CAAcA,CAAd,CACH,CAHL,CAIH,CAPD,EAOGC,IAPH,CAOQlB,CAAY,CAACmB,SAPrB,CAQH,CAbD,EAaGD,IAbH,CAaQlB,CAAY,CAACmB,SAbrB,CAcH,CAnBD,CAqBA,MAAO,CACHC,IAAI,CAAE,eAAW,CACTtB,CAAC,CAACuB,QAAD,CAAD,CAAYC,EAAZ,CAAe,OAAf,CAAwB,0BAAxB,CAAoD,SAASC,CAAT,CAAY,CAC5DA,CAAC,CAACC,cAAF,GAD4D,GAExDC,CAAAA,CAAM,CAAG3B,CAAC,CAACyB,CAAC,CAACG,aAAH,CAAD,CAAmBC,IAAnB,CAAwB,aAAxB,CAF+C,CAGxDrB,CAAQ,CAAGR,CAAC,CAAC,0BAAD,CAH4C,CAIxDO,CAAQ,CAAGC,CAAQ,CAACqB,IAAT,CAAc,eAAd,CAJ6C,CAK5D5B,CAAG,CAAC6B,WAAJ,CAAgB,CACZ,CAACC,GAAG,CAAE,cAAN,CAAsBC,SAAS,CAAG,OAAlC,CADY,CAEZ,CAACD,GAAG,CAAE,mBAAN,CAA2BC,SAAS,CAAG,eAAvC,CAFY,CAGZ,CAACD,GAAG,CAAE,KAAN,CAAaC,SAAS,CAAE,QAAxB,CAHY,CAIZ,CAACD,GAAG,CAAE,IAAN,CAAYC,SAAS,CAAG,QAAxB,CAJY,CAAhB,EAMCC,IAND,CAMM,SAASC,CAAT,CAAY,CACdhC,CAAY,CAACiC,OAAb,CAAqBD,CAAC,CAAC,CAAD,CAAtB,CAA2BA,CAAC,CAAC,CAAD,CAA5B,CAAiCA,CAAC,CAAC,CAAD,CAAlC,CAAuCA,CAAC,CAAC,CAAD,CAAxC,CAA6C,UAAW,CACpD7B,CAAa,CAACsB,CAAD,CAASpB,CAAT,CAAmBC,CAAnB,CAChB,CAFD,EAGA,QACH,CAXD,EAYC4B,KAZD,EAaH,CAlBD,CAoBP,CAtBE,CAwBV,CA9CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add confirmation\n *\n * @module     tool_roland04/confirm_delete\n * @package    tool_roland04\n * @copyright  2019 Mikel Mart√≠n\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/notification', 'core/ajax', 'core/templates'], function($, str, notification, ajax, templates) {\n    var processDelete = function(id, courseId, todoList) {\n        var promises = ajax.call([{\n            methodname: 'tool_roland04_delete_todo',\n            args: {id: id}\n        }]);\n        promises[0].done(function() {\n            var promises = ajax.call([{\n                methodname: 'tool_roland04_get_todo_list',\n                args: {courseid: courseId}\n            }]);\n            promises[0].done(function(data) {\n                // eslint-disable-next-line no-console\n                console.log('todolist', todoList);\n                templates.render('tool_roland04/todo_list', data)\n                    .done(function(html) {\n                        todoList.html(html);\n                    });\n            }).fail(notification.exception);\n        }).fail(notification.exception);\n    };\n\n    return {\n        init: function() {\n                $(document).on('click', '[data-action=deletetodo]', function(e) {\n                    e.preventDefault();\n                    var todoId = $(e.currentTarget).attr('data-todoid');\n                    var todoList = $(\"#tool_roland04_TODO_list\");\n                    var courseId = todoList.attr('data-courseid');\n                    str.get_strings([\n                        {key: 'confirmation', component:  'admin'},\n                        {key: 'confirmdeletetodo', component:  'tool_roland04'},\n                        {key: 'yes', component: 'moodle'},\n                        {key: 'no', component:  'moodle'}\n                    ])\n                    .then(function(s) {\n                        notification.confirm(s[0], s[1], s[2], s[3], function() {\n                            processDelete(todoId, courseId, todoList);\n                        });\n                        return true;\n                    })\n                    .catch();\n                }\n            );\n        }\n    };\n});"],"file":"confirm_delete.min.js"}